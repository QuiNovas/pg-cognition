
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to pg-cognition’s documentation! &#8212; pg-cognition  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">pg-cognition  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-pg-cognition-s-documentation">
<h1>Welcome to pg-cognition’s documentation!<a class="headerlink" href="#welcome-to-pg-cognition-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="databaseclient">
<h1>DatabaseClient<a class="headerlink" href="#databaseclient" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="PgCognition.DatabaseClient">
<em class="property">class </em><code class="sig-prename descclassname">PgCognition.</code><code class="sig-name descname">DatabaseClient</code><span class="sig-paren">(</span><em class="sig-param">event=None</em>, <em class="sig-param">config={}</em><span class="sig-paren">)</span><a class="headerlink" href="#PgCognition.DatabaseClient" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="PgCognition.DatabaseClient.getCredentials">
<code class="sig-name descname">getCredentials</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#PgCognition.DatabaseClient.getCredentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Get RDS credentials for the user who called us.</p>
<dl class="simple">
<dt>Secrets for cognito users are constructed as such:</dt><dd><p>arn:aws:secretsmanager:{self.region}:{self.config[“account”]}:{self.secretsPath}/self.config[“identity”][“email”]</p>
</dd>
<dt>We will return the first credential found in the order of:</dt><dd><ol class="arabic simple">
<li><p>If caller is a Cognito user</p></li>
<li><p>If caller is matched in roleOverrides</p></li>
<li><p>If caller is matched in assumedRoleOverrides</p></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PgCognition.DatabaseClient.resolveAppsyncQuery">
<code class="sig-name descname">resolveAppsyncQuery</code><span class="sig-paren">(</span><em class="sig-param">schema=None</em><span class="sig-paren">)</span><a class="headerlink" href="#PgCognition.DatabaseClient.resolveAppsyncQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query for each item in the event.
:returns: foo
:rtype: str</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cognito">
<h1>Cognito<a class="headerlink" href="#cognito" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="PgCognition.Cognito">
<em class="property">class </em><code class="sig-prename descclassname">PgCognition.</code><code class="sig-name descname">Cognito</code><span class="sig-paren">(</span><em class="sig-param">event</em>, <em class="sig-param">config</em><span class="sig-paren">)</span><a class="headerlink" href="#PgCognition.Cognito" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="PgCognition.Cognito.AddClaims">
<code class="sig-name descname">AddClaims</code><span class="sig-paren">(</span><em class="sig-param">extraClaims=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#PgCognition.Cognito.AddClaims" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds claims to Cognito user and returns the object’s event.
Intended to be used with Cognito Pre Token Generation hook</p>
</dd></dl>

<dl class="method">
<dt id="PgCognition.Cognito.UserIsActive">
<code class="sig-name descname">UserIsActive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#PgCognition.Cognito.UserIsActive" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a bool indicating if a user exists and is active.
Useful for Cognito Pre Authentication hook</p>
</dd></dl>

<dl class="method">
<dt id="PgCognition.Cognito.UserIsInvited">
<code class="sig-name descname">UserIsInvited</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#PgCognition.Cognito.UserIsInvited" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a bool indicating if a user has been invited or not</p>
<p>If called by Cognito Post Signup then DatabaseClient.createDatabaseUser({“user”: user})
can be called afterward to create the user in the database. If using AWS Lambda then the
Lambda function that calls createDatabaseUser() should be invoked async after this method
since it can take longer than the 5 timeout that applies to Cognito hooks.</p>
<p>If called by Cognito Pre Signup then we will simply prove that a user has been invited
before continuing with the signup process.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cognition-functions">
<h1>cognition_functions<a class="headerlink" href="#cognition-functions" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to pg-cognition’s documentation!</a></li>
<li><a class="reference internal" href="#databaseclient">DatabaseClient</a></li>
<li><a class="reference internal" href="#cognito">Cognito</a></li>
<li><a class="reference internal" href="#cognition-functions">cognition_functions</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="#">pg-cognition  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Mathew Moon.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>